## test.bna
##
## Tests all BNA operations as a regression test.
## Makes some random numbers and averages them.

INPUT count WITH "Numbers to generate: "
SET i TO 0
SET total TO 0
LIST numbers SIZE 0
OPEN "output.txt" AS WRITE out_file

# Loop 'count' number of times
^begin_loop:
TEST i > count
GOTO end_loop IF success

# Get random number 1 - 10
RANDOM x MAX 9
ADD 1 TO x
PRINT x
APPEND x TO numbers
WRITE numbers@i TO out_file
WRITE "\n" TO out_file

# Add to total and increment
ADD numbers@i TO total
WAIT 0.25
ADD 1 TO i

# Go back to loop condition
GOTO begin_loop IF 1
^end_loop:

CLOSE out_file

# Calculate average
SET average TO total
DIVIDE average BY count
WAIT 2
PRINT "average = "
PRINT average
PRINT ""

# Read a "Hello, World!"
OPEN "input.txt" AS READ in_file
READ hello FROM in_file
PRINT hello
CLOSE in_file
PRINT ""

# Do lots of math
INPUT num WITH "num = "

SET val TO num
SUBTRACT 1 FROM val
PRINT "\nnum - 1 = "
PRINT val

SET val TO num
MULTIPLY val BY 3.5
PRINT "\nnum * 3.5 = "
PRINT val

SET val TO num
LOG 10 OF val
PRINT "\nlog_10( num ) = "
PRINT val

SET val TO num
RAISE val TO 2
PRINT "\nnum ** 2 = "
PRINT val

SET r_val TO num
ROUND r_val
PRINT "\nnum rounded = r_num = "
PRINT r_val

SET val TO r_val
MOD 5 OF val
PRINT "\nr_num % 5 = "
PRINT val

SET val TO r_val
NEGATE val
PRINT "\n!r_num = "
PRINT val

SET val TO r_val
OR val WITH 7
PRINT "\nr_num | 7 = "
PRINT val

SET val TO r_val
AND val WITH 7
PRINT "\nr_num & 7 = "
PRINT val

SET val TO r_val
XOR val WITH 7
PRINT "\nr_num ^ 7 = "
PRINT val

